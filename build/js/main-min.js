"use strict";jQuery.fn.exists=function(){return $(this).length},$(function(){var e,t,i="";function r(e,t){var i=$(e).height();$(t).css({height:i+"px"}),console.log($(e).height())}if($(".btn--close").on("click",function(e){e.preventDefault(),$(".header__search--laptop input").val("")}),$(".burger--laptop").exists&&$(".burger--laptop").on("click",function(){$(this).toggleClass("burger--active"),$(".header__menu").toggleClass("header__menu--active")}),$(".edition-rewards").length>0&&$("head").append('<link rel="stylesheet" type="text/css" href="css/lightgallery.min.css">'),$(".news-detail").length>0&&$("head").append('<link rel="stylesheet" type="text/css" href="css/lightgallery.min.css">'),$("#video-gallery").length>0&&$("head").append('<link rel="stylesheet" type="text/css" href="css/lg-video.css">'),e=".article__box",t=".article__cover",$(e).exists()&&$(e).each(function(){!$(this).find(t).length>0&&$(this).addClass("article__box--full")}),lightGallery(document.getElementById("video-gallery"),{thumbnail:!1,background:"A90707",selector:".video-gallery__item"}),$(".filter__item").exists()&&($(".filter__box").mCustomScrollbar({theme:"dark",mouseWheelPixels:90}),$(".filter__bloc").on("click",function(){$(".filter__item").toggleClass("filter__item--active")}),$(".filter__block").each(function(){$(this).on("click",function(){var e=$(this).find("label").text();$(".filter__txt").text(e),$(this).closest(".filter__item").removeClass("filter__item--active")})}),$(document).on("click",function(e){var t=e.target;$(t).hasClass(".filter__item")||$(this).closest(".filter__item").removeClass("filter__item--active")})),$(".journal__items").exists)try{var a,s=window.matchMedia("(min-width:501px)"),l=function(){if(!0===s.matches)return $(".journal__inner").exists()&&(r(".journal__inner",".journal__cover"),$(window).on("resize load",function(){r(".journal__inner",".journal__cover")})),void $(".journal__items").each(function(){a=new Swiper("."+$(this).data("id"),{slidesPerView:4,spaceBetween:18,stopOnLastSlide:!1,disableOnInteraction:!0,touchRatio:0,breakpoints:{500:{spaceBetween:15,slidesPerView:3},600:{spaceBetween:15,slidesPerView:3},601:{spaceBetween:15,slidesPerView:4},769:{spaceBetween:15,slidesPerView:5},1024:{spaceBetween:15,slidesPerView:5},1025:{slidesPerView:4,spaceBetween:18}},navigation:{nextEl:".journal__arrow.journal__arrow--next",prevEl:".journal__arrow.journal__arrow--prev"}})});!1!==s.matches||void 0!==a&&a.destroy(!0,!0)};s.addListener(l),l()}catch(e){console.log(e)}!function(e,t,i,r){$(e).exists()&&$(e).each(function(){var e=0;$(this).find(t).each(function(t){!$(this).find(r).length>0&&e++}),1==e&&$(this).find(t).each(function(e){$(this).find(r).exists()&&(0==e?$(this).closest(i).addClass("news-popular__bloc--other"):$(this).closest(i).addClass("news-popular__bloc--reverse"))})})}(".news-popular__items",".news-popular__item",".news-popular__bloc",".news-popular__pic"),$(document).on("click",function(e){if($(".archive-filter__item").exists)try{var t=$(e.target).closest(".archive-filter__bloc"),i=$(e.target).closest(".mCSB_dragger"),r="";t.length||(r=$(".archive-filter__item--active"),$(".archive-filter__item--active").removeClass("archive-filter__item--active")),i.length&&r.addClass("archive-filter__item--active")}catch(e){console.log(e)}});if($(".news-popular--popular").exists,$(".archive-filter__panel").exists())try{for(var c=document.getElementsByClassName("archive-filter__panel"),n=0;n<c.length;n++)c[n].onclick=function(e){var t=e.target;if(!$(t).attr("href")){this.classList.toggle("archive-filter__panel--active"),$(this).parent().toggleClass("archive-filter__wrp--active");var i=this.nextElementSibling;i.style.maxHeight?i.style.maxHeight=null:i.style.maxHeight=i.scrollHeight+"px"}}}catch(e){console.log(e)}function o(){if($(".archive-filter__item").exists)try{var e=$(".archive-filter__item--month").find(".archive-filter__block"),t="";$(e).each(function(){$(this).children("input").prop("checked")&&(-1!=(t=$(this).children("label").text()).indexOf("Декабрь")||-1!=t.indexOf("Январь")||-1!=t.indexOf("Март")||-1!=t.indexOf("Май")||-1!=t.indexOf("Июль")||-1!=t.indexOf("Август")||-1!=t.indexOf("Октябрь")?(h(".archive-filter__item--day",31),$(".archive-filter__item--day").find(".archive-filter__txt").text("31")):-1!=t.indexOf("Сентябрь")||-1!=t.indexOf("Июнь")||-1!=t.indexOf("Ноябрь")||-1!=t.indexOf("Апрель")?(h(".archive-filter__item--day",30),$(".archive-filter__item--day").find(".archive-filter__txt").text("30")):(h(".archive-filter__item--day",28),$(".archive-filter__item--day").find(".archive-filter__txt").text("28")))})}catch(e){console.log(e)}}function h(e,t){if($(".archive-filter__item").exists)try{if(".archive-filter__item--year"==e){i=$(e).find(".archive-filter__list");for(var r=_.currentYear;r>=t;r--){var a=document.createElement("div"),s=document.createElement("input"),l=document.createElement("label");a.classList.add("archive-filter__block"),r==_.currentYear&&(s.setAttribute("checked","checked"),s.setAttribute("currentyear",_.currentYear)),s.setAttribute("id","y-".concat(r)),s.setAttribute("type","radio"),s.setAttribute("name",_.year),s.setAttribute("value","".concat(r)),l.setAttribute("for","y-".concat(r)),l.textContent=r,a.append(s),a.append(l),i.append(a)}}else{i=$(e).find(".archive-filter__list");for(var c=t;c>0;c--){var n=document.createElement("div"),o=document.createElement("input"),h=document.createElement("label");n.classList.add("archive-filter__block"),c==_.currentDay&&(o.setAttribute("checked","checked"),o.setAttribute("currentday",_.currentDay)),o.setAttribute("id","d-".concat(c)),o.setAttribute("type","radio"),o.setAttribute("name",_.day),o.setAttribute("value","".concat(c)),h.setAttribute("for","d-".concat(c)),h.textContent=c,n.append(o),n.append(h),i.append(n)}}}catch(e){console.log(e)}}if($(".archive-filter__item").exists())try{if($(".archive-filter__items").length>0){document.querySelector(".archive-filter__items");var _=$(".archive-filter__items").data("filter");o(),h(".archive-filter__item--year",_.min)}$(".archive-filter__item").each(function(){var e,t,i="",r="";i=$(this).find(".archive-filter__box"),$(i).mCustomScrollbar({theme:"dark",mouseWheelPixels:90}),i=$(this).find(".archive-filter__bloc"),e=$(this).find(".archive-filter__txt"),t=$(this).find(".archive-filter__list").find("input"),$(t).each(function(){$(this).prop("checked")&&$(e).text($(this).next().text())}),$(i).on("click",function(){$(this).toggleClass("archive-filter__item--active").siblings().removeClass("archive-filter__item--active"),$(this).hasClass("archive-filter__item--active")&&(r=$(this).find(".archive-filter__block"),$(r).each(function(){$(this).on("click",function(){$(e).text($(this).text()),$(".archive-filter__item").removeClass("archive-filter__item--active")})})),$(this).hasClass("archive-filter__item--active")&&$(this).hasClass("archive-filter__item--year")&&(r=$(this).find(".archive-filter__block"),$(r).each(function(){$(this).on("click",function(){$(e).text($(this).text()),$(".archive-filter__item--day").find(".archive-filter__block").remove(),$(this).find("input").attr("currentYear",_.currentYear).closest(".archive-filter__block").siblings().find("input").removeAttr("currentyear"),o()})})),$(this).hasClass("archive-filter__item--active")&&$(this).hasClass("archive-filter__item--day")&&(r=$(this).find(".archive-filter__block"),$(r).each(function(){$(this).on("click",function(){$(this).find("input").attr("currentDay",_.currentDay).closest(".archive-filter__block").siblings().find("input").removeAttr("currentday")})})),$(this).hasClass("archive-filter__item--active")&&$(this).hasClass("archive-filter__item--month")&&(r=$(this).find(".archive-filter__block"),$(r).each(function(){$(this).on("click",function(){$(e).text($(this).text()),$(".archive-filter__item--day").find(".archive-filter__block").remove(),o()})}))}.bind(this))})}catch(e){console.log(e)}if($(".header__search--laptop").exists)try{$(".header__btn").on("click",function(e){e.preventDefault(),$(".header__search--laptop").hasClass("header__search--active")?""!=$(".header__search--laptop input").val()?$(".header__search").submit():$(".header__search--laptop").toggleClass("header__search--active"):($(".header__search--laptop").toggleClass("header__search--active"),setTimeout(function(){$(".header__search--laptop input").focus()},500))})}catch(e){console.log(e)}if($(".header__inner").exists)try{var d=$(window),f=$(".header__inner"),u=f.offset().top;d.on("scroll",function(){(window.pageYOffset||document.documentElement.scrollTop)>u?f.addClass("mf-fixed"):f.removeClass("mf-fixed")})}catch(e){console.log(e)}if($(".header__func").exists)try{$(".header__func").on("click",function(){$(".header__func").toggleClass("header__func--active"),$(".header__section").toggleClass("header__section--active")})}catch(e){console.log(e)}if($(".author-articles__grid--slider").exists)try{var v,m=window.matchMedia("(min-width:600px)"),p=function(){if(!0!==m.matches)return!1===m.matches?g():void 0;void 0!==v&&v.destroy(!0,!0)},g=function(){v=new Swiper(".author-articles__grid--slider",{slidesPerView:"auto",spaceBetween:16,loop:!0,autoplay:!0,delay:3e3,stopOnLastSlide:!1,disableOnInteraction:!0})};m.addListener(p),p()}catch(e){console.log(e)}function w(){if($(".news-detail__item").exists)try{var e=document.createElement("div"),t=document.createElement("div"),i=document.createElement("div"),r=y[B].parentNode;$(e).attr("class","gallery__top"),$(e).addClass("gallery__main"+B),$(t).attr("class","gallery"),$(i).attr("class","swiper-wrapper"),i.innerHTML+=x,$(e).append(i),$(t).append(e);var a=document.createElement("div");$(a).attr("class","gallery__thumbs"),$(a).addClass("gallery__btn"+B);for(var s=0;s<2;s++)if(1==s){var l=document.createElement("div");$(l).attr("class","b-arrow b-arrow--prev"),$(a).append(l)}else{l=document.createElement("div");$(l).attr("class","b-arrow b-arrow--next"),$(a).append(l)}r.insertBefore(t,y[B]),t.append(a),$(e).find(i).clone().appendTo(a)}catch(e){console.log(e)}}for(var y=document.querySelectorAll(".news-detail__item > *"),b=0,x="",k=[],C=0,E=0;E<y.length;E++)$(y[E]).is("img")?($(y[E]).attr("class",b),k.push(b)):b++;for(var B=0;B<y.length;B++)y[B].classList.contains(C)?(x+=y[B].outerHTML,$(y[B]).hide(),y[B]==y[y.length-1]&&x&&w()):(x&&w(),x="",C++);function A(e){for(var t=document.querySelectorAll("."+e),i=[],r=0;r<t.length;r++)i.push(t[r]);i.forEach(function(t,i){for(var r=t.querySelectorAll("img"),a=[],s=0;s<r.length;s++)a.push(r[s]);a.forEach(function(t,i){var r=document.createElement("a");r.innerHTML=t.outerHTML,"gallery__thumbs"!=e&&r.setAttribute("href",t.getAttribute("src")),r.classList.add("gallery-item"),r.classList.add("swiper-slide"),t.parentNode.replaceChild(r,t)}),t.setAttribute("id","slide"+i),lightGallery(document.querySelector("#"+t.id),{selector:".gallery-item"})})}A("gallery__top"),A("gallery__thumbs");$(".gallery__thumbs").find(".swiper-slide");$(document).ready(function(){for(var e=0;e<y.length;e++){var t=new Swiper(".gallery__btn"+e,{spaceBetween:17,slidesPerView:5,freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0,breakpoints:{320:{spaceBetween:8,slidesPerView:3},501:{spaceBetween:8,slidesPerView:4},769:{spaceBetween:17,slidesPerView:6},1024:{spaceBetween:17,slidesPerView:6},1025:{spaceBetween:17,slidesPerView:5}}});new Swiper(".gallery__main"+e,{spaceBetween:10,thumbs:{swiper:t},navigation:{nextEl:".b-arrow--next",prevEl:".b-arrow--prev"}})}});for(var S=0;S<y.length;S++)$(".gallery__btn"+S).each(function(){var e=$(this).find(".swiper-slide");e.length>1&&$(".gallery__btn"+S).fadeIn(),e.length>5&&$(this).find(".b-arrow").css("display","block")});if(lightGallery(document.getElementById("lightgallery")),$("#input-search").exists)try{$("#input-search").on("keyup",function(){$(this).val()?($(".mf-search").addClass("mf-search--active"),$(".header__field .b-svg").css({stroke:"#27202C"})):($(".mf-search").removeClass("mf-search--active"),$(".header__field .b-svg").css({stroke:"#DBD4E0"}))}),$("#input-search").focusout(function(){$(this).val()||($(".mf-search").removeClass("mf-search--active"),$(".header__field .b-svg").css({stroke:"#DBD4E0"}))})}catch(e){console.log(e)}if($(".news-slider__gallery").exists&&$(".news-slider__thumbs").exists)try{var P=new Swiper(".news-slider__gallery",{spaceBetween:10,slidesPerView:1,watchSlidesVisibility:!0,effect:"fade"}),V=new Swiper(".news-slider__thumbs",{spaceBetween:10,autoHeight:!0,effect:"fade",touchRatio:0,navigation:{nextEl:".news-slider__arrow--next",prevEl:".news-slider__arrow--prev"},fadeEffect:{crossFade:!0}});V.controller.control=P,P.controller.control=V}catch(e){}});