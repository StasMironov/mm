"use strict";if(jQuery.fn.exists=function(){return $(this).length},$(".news-archive__slider").exists())var authorSlider=new Swiper(".news-archive__slider",{spaceBetween:40,slidesPerView:4,slidesPerColumn:2,slidesPerColumnFill:"row",slidesPerGroup:4,navigation:{nextEl:".edition-slider__arr--next",prevEl:".edition-slider__arr--prev"},pagination:{el:".news-archive__pag",clickable:!0},breakpoints:{1920:{spaceBetween:40,slidesPerView:4},1025:{spaceBetween:40,slidesPerView:4},1024:{spaceBetween:40,slidesPerView:3,slidesPerGroup:3},993:{spaceBetween:40,slidesPerView:3,slidesPerGroup:3},992:{spaceBetween:30,slidesPerView:2,slidesPerGroup:2},769:{spaceBetween:30,slidesPerView:2,slidesPerGroup:2},768:{spaceBetween:20,slidesPerView:2,slidesPerGroup:2},641:{spaceBetween:20,slidesPerView:2,slidesPerGroup:2},640:{spaceBetween:15,slidesPerView:4,slidesPerGroup:4},501:{spaceBetween:20,slidesPerView:4,slidesPerGroup:4},500:{spaceBetween:20,slidesPerView:2,slidesPerGroup:2},320:{spaceBetween:20,slidesPerView:2,slidesPerGroup:2}}});var link,themeDefault;$(".theme-button").exists()&&function(){var e=function(e){var t=new XMLHttpRequest;t.open("GET","/local/templates/magmetall/themes.php?theme="+e,!0),t.send()};btn=document.querySelectorAll(".theme-button"),link=document.getElementById("theme-link"),themeDefault="";for(var t=0;t<btn.length;t++)btn[t].addEventListener("click",function(){var t,i=(t=""==(t=link.getAttribute("href"))?"/local/templates/magmetall/css/dark.css ":"",link.setAttribute("href",t),t);sessionStorage.setItem("theme",i),e(i)});null!==sessionStorage.getItem("theme")?($("#theme-link").attr("href",sessionStorage.getItem("theme")),sessionStorage.getItem("theme")==themeDefault?$(".header .checkbox input").prop("checked",!0):$(".header .checkbox input").prop("checked",!1)):($("#theme-link").attr("href",themeDefault),$(".header .checkbox input").prop("checked",!0))}();if($("#btnUp").exists()){var btn=$("#btnUp");$(window).scroll(function(){$(window).scrollTop()>300?btn.addClass("showBtn"):btn.removeClass("showBtn")}),btn.on("click",function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},"300")})}function articleSlider(){if($(".author-articles__grid--slider").exists)try{var e,t=window.matchMedia("(min-width:600px)"),i=function(){if(!0!==t.matches)return!1===t.matches?r():void 0;void 0!==e&&e.destroy(!0,!0)},r=function(){e=new Swiper(".author-articles__grid--slider",{slidesPerView:"auto",spaceBetween:16,loop:!0,autoplay:!0,delay:3e3,stopOnLastSlide:!1,disableOnInteraction:!0})};t.addListener(i),i()}catch(e){console.log(e)}}function setHeaderHeight(e,t){var i=$(e).height();$(t).css({height:i+"px"})}function journalSlider(){if($(".journal__items").exists)try{var e,t=window.matchMedia("(min-width:501px)"),i=function(){if(!0===t.matches)return $(".journal__inner").exists()&&(setHeaderHeight(".journal__inner",".journal__cover"),$(window).on("resize load",function(){setHeaderHeight(".journal__inner",".journal__cover")})),void $(".journal__items").each(function(){e=new Swiper("."+$(this).data("id"),{slidesPerView:4,spaceBetween:18,stopOnLastSlide:!1,disableOnInteraction:!0,touchRatio:0,breakpoints:{500:{spaceBetween:15,slidesPerView:3},600:{spaceBetween:15,slidesPerView:3},601:{spaceBetween:15,slidesPerView:4},769:{spaceBetween:15,slidesPerView:5},1024:{spaceBetween:15,slidesPerView:5},1025:{slidesPerView:4,spaceBetween:18}},navigation:{nextEl:".journal__arrow.journal__arrow--next",prevEl:".journal__arrow.journal__arrow--prev"}})});!1!==t.matches||void 0!==e&&e.destroy(!0,!0)};t.addListener(i),i()}catch(e){console.log(e)}}function createLightGallery(e){-1!==["archiveVideo"].indexOf(e)?(lightGallery(document.getElementById(e),{thumbnail:!1,background:"A90707",selector:".news-archive__block"}),console.log("777")):-1!==["video-gallery"].indexOf(e)?lightGallery(document.getElementById(e),{thumbnail:!1,background:"A90707",selector:".video-gallery__item"}):lightGallery(document.getElementById(e))}function checkGallery(e){if($("#"+e).length>0)try{var t=document.getElementById(e);window.lgData[t.getAttribute("lg-uid")]?(window.lgData[t.getAttribute("lg-uid")].destroy(!0),createLightGallery(e)):createLightGallery(e)}catch(e){console.log(e)}}if($(".content--ad").exists())try{0===$(".content--ad").children().length?$(".content--ad").addClass("mf-empty"):$(".content--ad").removeClass("mf-empty")}catch(e){console.log(e)}$(window).on("load",function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}),$(window).on("load resize",function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}),$(document).on("click tap",function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}),$(function(){journalSlider(),articleSlider(),createLightGallery("archiveVideo"),createLightGallery("lightgallery"),createLightGallery("video-gallery");var e,t,i="";if($(".archive-filter__item--month-alternative input").exists())try{$(".archive-filter__item--month-alternative input").change(function(){if(this.checked){var e=parseInt($(this).val())-1,t=[31,29,31,30,31,30,31,30,31,30,31,30];parseInt($(".archive-filter__item--day-alternative").find(".archive-filter__txt").text())>t[e]&&($('.archive-filter__item--day-alternative input[checked="checked"]').removeAttr("checked"),$('.archive-filter__item--day-alternative input[value="'+t[e]+'"]').first().attr("checked","checked"),$(".archive-filter__item--day-alternative").find(".archive-filter__txt").text(t[e]))}})}catch(e){console.log(e)}if($(".btn--close").exists)try{$(".btn--close").on("click",function(e){e.preventDefault(),$(".header__search--laptop input").val(""),$(".header__search--laptop").removeClass("header__search--active")})}catch(e){console.log(e)}if($(".burger--laptop").exists)try{$(".burger--laptop").on("click",function(){$(this).toggleClass("burger--active"),$(".header__menu").toggleClass("header__menu--active"),$(".burger--laptop").hasClass("burger--active")?$("html").css("overflow","hidden"):$("html").css("overflow","auto")})}catch(e){console.log(e)}if($(".edition-rewards").length>0)try{$("head").append('<link rel="stylesheet" type="text/css" href="css/lightgallery.min.css">')}catch(e){console.log(e)}if($(".news-detail").length>0)try{$("head").append('<link rel="stylesheet" type="text/css" href="css/lightgallery.min.css">')}catch(e){console.log(e)}if($("#video-gallery").length>0)try{$("head").append('<link rel="stylesheet" type="text/css" href="css/lg-video.css">')}catch(e){console.log(e)}if(e=".article__box",t=".article__cover",$(e).exists()&&$(e).each(function(){!$(this).find(t).length>0&&$(this).addClass("article__box--full")}),$(".header__bottom .header__nav").exists&&$(function(){var e=new Object;e.axis="x",e.theme="my-theme",e.advanced={autoExpandHorizontalScroll:!0},e.scrollButtons={scrollType:"pixels",scrollAmount:300},e.mouseWheel={invert:!0},$(".header__bottom .header__nav").mCustomScrollbar(e)}),$(".filter__item").exists())try{$(".filter__box").mCustomScrollbar({theme:"dark",mouseWheelPixels:90}),$(".filter__bloc").on("click",function(){$(".filter__item").toggleClass("filter__item--active")}),$(".filter__block").each(function(){$(this).on("click",function(){var e=$(this).find("label").text();$(".filter__txt").text(e),$(this).closest(".filter__item").removeClass("filter__item--active")})}),$(document).on("click",function(e){var t=e.target;$(t).hasClass(".filter__item")||$(this).closest(".filter__item").removeClass("filter__item--active")}),jQuery(function(e){e(document).mouseup(function(t){var i=e(".filter__item");i.is(t.target)||0!==i.has(t.target).length||i.removeClass("filter__item--active")})})}catch(e){console.log(e)}function r(e,t){if(e.length>0)for(var i=document.querySelectorAll(e),r=0;r<i.length;r++)a(i[r],t)}function a(e,t){var i=e.textContent,r=i.slice(0,t);r.length<i.length&&(r+="..."),e.textContent=r}if(function(e,t,i,r){$(e).exists()&&$(e).each(function(){var e=0;$(this).find(t).each(function(t){!$(this).find(r).length>0&&e++}),1==e&&$(this).find(t).each(function(e){$(this).find(r).exists()&&(0==e?$(this).closest(i).addClass("news-popular__bloc--other"):$(this).closest(i).addClass("news-popular__bloc--reverse"))})})}(".news-popular__items",".news-popular__item",".news-popular__bloc",".news-popular__pic"),$(document).on("click",function(e){if($(".archive-filter__item").exists)try{var t=$(e.target).closest(".archive-filter__bloc"),i=$(e.target).closest(".mCSB_dragger"),r="";t.length||(r=$(".archive-filter__item--active"),$(".archive-filter__item--active").removeClass("archive-filter__item--active")),i.length&&r.addClass("archive-filter__item--active")}catch(e){console.log(e)}}),r(".news-popular__text",150),r(".news-basic__text",179),r(".news-set__text",150),r(".news-actual__txt",115),r(".news-most__txt",158),r(".news-most__text",46),r(".news-photo__info",115),r(".author-articles__txt",72),r(".search__text",72),r(".search__text",72),r(".news-slider__txt",250),r(".news-slider__txt",250),r(".publish__txt",27),$(".archive-filter__panel").exists())try{for(var s=document.getElementsByClassName("archive-filter__panel"),l=0;l<s.length;l++)s[l].onclick=function(e){var t=e.target;if(!$(t).attr("href")){this.classList.toggle("archive-filter__panel--active"),$(this).parent().toggleClass("archive-filter__wrp--active");var i=this.nextElementSibling;i.style.maxHeight?i.style.maxHeight=null:i.style.maxHeight=i.scrollHeight+"px"}}}catch(e){console.log(e)}function n(){if($(".archive-filter__item").exists)try{var e=$(".archive-filter__item--month").find(".archive-filter__block"),t="";$(e).each(function(){$(this).children("input").prop("checked")&&(-1!=(t=$(this).children("label").text()).indexOf("Декабрь")||-1!=t.indexOf("Январь")||-1!=t.indexOf("Март")||-1!=t.indexOf("Май")||-1!=t.indexOf("Июль")||-1!=t.indexOf("Август")||-1!=t.indexOf("Октябрь")?(c(".archive-filter__item--day",31),$(".archive-filter__item--day").find(".archive-filter__txt").text("31")):-1!=t.indexOf("Сентябрь")||-1!=t.indexOf("Июнь")||-1!=t.indexOf("Ноябрь")||-1!=t.indexOf("Апрель")?(c(".archive-filter__item--day",30),$(".archive-filter__item--day").find(".archive-filter__txt").text("30")):(c(".archive-filter__item--day",28),$(".archive-filter__item--day").find(".archive-filter__txt").text("28")))})}catch(e){console.log(e)}}function c(e,t){if($(".archive-filter__item").exists)try{if(".archive-filter__item--year"==e){var r=document.querySelector(".archive-filter__item--year");i=r.querySelector(".archive-filter__list");for(var a=o.currentYear;a>=t;a--){var s=document.createElement("div"),l=document.createElement("input"),n=document.createElement("label");s.classList.add("archive-filter__block"),a==o.currentYear&&(l.setAttribute("checked","checked"),l.setAttribute("currentyear",o.currentYear)),l.setAttribute("id","y-".concat(a)),l.setAttribute("type","radio"),l.setAttribute("name",o.year),l.setAttribute("value","".concat(a)),n.setAttribute("for","y-".concat(a)),n.textContent=a,s.appendChild(l),s.appendChild(n),i.appendChild(s)}}else{var c=document.querySelector(".archive-filter__item--day");i=c.querySelector(".archive-filter__list");for(var d=t;d>0;d--){var h=document.createElement("div"),_=document.createElement("input"),f=document.createElement("label");h.classList.add("archive-filter__block"),d==o.currentDay&&(_.setAttribute("checked","checked"),_.setAttribute("currentday",o.currentDay)),_.setAttribute("id","d-".concat(d)),_.setAttribute("type","radio"),_.setAttribute("name",o.day),_.setAttribute("value","".concat(d)),f.setAttribute("for","d-".concat(d)),f.textContent=d,h.appendChild(_),h.appendChild(f),i.appendChild(h)}}}catch(e){console.log(e)}}if($(".archive-filter__item").exists())try{if($(".archive-filter__items").length>0){document.querySelector(".archive-filter__items");var o=$(".archive-filter__items").data("filter");n(),c(".archive-filter__item--year",o.min)}$(".archive-filter__item").each(function(){var e,t,i="",r="";i=$(this).find(".archive-filter__box"),$(i).mCustomScrollbar({theme:"dark",mouseWheelPixels:90}),i=$(this).find(".archive-filter__bloc"),e=$(this).find(".archive-filter__txt"),t=$(this).find(".archive-filter__list").find("input"),$(t).each(function(){$(this).prop("checked")&&$(e).text($(this).next().text())}),$(i).on("click",function(){$(this).toggleClass("archive-filter__item--active").siblings().removeClass("archive-filter__item--active"),$(this).hasClass("archive-filter__item--active")&&(r=$(this).find(".archive-filter__block"),$(r).each(function(){$(this).on("click",function(){$(e).text($(this).text()),$(".archive-filter__item").removeClass("archive-filter__item--active")})})),$(this).hasClass("archive-filter__item--active")&&$(this).hasClass("archive-filter__item--year")&&(r=$(this).find(".archive-filter__block"),$(r).each(function(){$(this).on("click",function(){$(e).text($(this).text()),$(".archive-filter__item--day").find(".archive-filter__block").remove(),$(this).find("input").attr({currentYear:o.currentYear}).closest(".archive-filter__block").siblings().find("input").removeAttr("currentyear").removeAttr("checked"),n()})})),$(this).hasClass("archive-filter__item--active")&&$(this).hasClass("archive-filter__item--day")&&(r=$(this).find(".archive-filter__block"),$(r).each(function(){$(this).on("click",function(){$(this).find("input").attr("currentDay",o.currentDay).closest(".archive-filter__block").siblings().find("input").removeAttr("currentday")})})),$(this).hasClass("archive-filter__item--active")&&$(this).hasClass("archive-filter__item--month")&&(r=$(this).find(".archive-filter__block"),$(r).each(function(){$(this).on("click",function(){$(e).text($(this).text()),$(".archive-filter__item--day").find(".archive-filter__block").remove(),n()})}))}.bind(this))})}catch(e){console.log(e)}if($(".header__search--laptop").exists)try{var d=function(e){e.preventDefault()};$(".header__btn").on("click",function(){$(".header__search--laptop").addClass("header__search--active"),$(".header__search--laptop").hasClass("header__search--active")&&(setTimeout(function(){$(".header__search--laptop input").focus()},500),$(".header__search--laptop").bind("submit",d)),""!=$(".header__search--laptop input").val()&&$(".header__search--laptop").unbind("submit",d)})}catch(e){console.log(e)}if($(".header__inner").exists)try{var h=$(window),_=$(".header__inner"),f=_.offset().top;h.on("scroll",function(){(window.pageYOffset||document.documentElement.scrollTop)>f?_.addClass("mf-fixed"):_.removeClass("mf-fixed")})}catch(e){console.log(e)}if($(".header__func").exists)try{$(".header__func").on("click",function(){$(".header__func").toggleClass("header__func--active"),$(".header__section").toggleClass("header__section--active")})}catch(e){console.log(e)}function u(){if($(".news-detail__item").exists)try{var e=document.createElement("div"),t=document.createElement("div"),i=document.createElement("div"),r=p[b].parentNode;$(e).attr("class","gallery__top"),$(e).addClass("gallery__main"+b),$(t).attr("class","gallery"),$(i).attr("class","swiper-wrapper"),i.innerHTML+=v,$(e).append(i),$(t).append(e);var a=document.createElement("div");$(a).attr("class","gallery__thumbs"),$(a).addClass("gallery__btn"+b);for(var s=0;s<2;s++)if(1==s){var l=document.createElement("div");$(l).attr("class","b-arrow b-arrow--prev"),$(a).append(l)}else{l=document.createElement("div");$(l).attr("class","b-arrow b-arrow--next"),$(a).append(l)}r.insertBefore(t,p[b]),t.appendChild(a),$(e).find(i).clone().appendTo(a)}catch(e){console.log(e)}}for(var p=document.querySelectorAll(".news-detail__item > *"),m=0,v="",g=[],w=0,y=0;y<p.length;y++)$(p[y]).is("img")?($(p[y]).attr("class",m),g.push(m)):m++;for(var b=0;b<p.length;b++)p[b].classList.contains(w)?(v+=p[b].outerHTML,$(p[b]).hide(),p[b]==p[p.length-1]&&v&&u()):(v&&u(),v="",w++);function x(e){for(var t=document.querySelectorAll("."+e),i=[],r=0;r<t.length;r++)i.push(t[r]);i.forEach(function(t,i){for(var r=t.querySelectorAll("img"),a=[],s=0;s<r.length;s++)a.push(r[s]);a.forEach(function(t,i){var r=document.createElement("a");r.innerHTML=t.outerHTML,"gallery__thumbs"!=e&&r.setAttribute("href",t.getAttribute("src")),r.classList.add("gallery-item"),r.classList.add("swiper-slide"),t.parentNode.replaceChild(r,t)}),t.setAttribute("id","slide"+i),lightGallery(document.querySelector("#"+t.id),{selector:".gallery-item"})})}x("gallery__top"),x("gallery__thumbs");$(".gallery__thumbs").find(".swiper-slide");$(".gallery").find(".swiper-slide").each(function(){$(this).append("<canvas class='gallery__img-bg'></canvas>");var e=$(this).find("canvas")[0];console.log($(this));var t=e.getContext("2d"),i=new Image;i.src=$(this).find("img").attr("src"),i.onload=function(){var r=Math.max(e.width/i.width,e.height/i.height);t.filter="blur(7px)",t.scale(r,r),t.drawImage(i,0,0)}}),$(document).ready(function(){for(var e=0;e<p.length;e++){var t=new Swiper(".gallery__btn"+e,{spaceBetween:17,slidesPerView:5,freeMode:!0,watchSlidesVisibility:!0,watchSlidesProgress:!0,breakpoints:{320:{spaceBetween:8,slidesPerView:3},501:{spaceBetween:8,slidesPerView:4},769:{spaceBetween:17,slidesPerView:6},1024:{spaceBetween:17,slidesPerView:6},1025:{spaceBetween:17,slidesPerView:5}}});new Swiper(".gallery__main"+e,{spaceBetween:10,thumbs:{swiper:t},navigation:{nextEl:".b-arrow--next",prevEl:".b-arrow--prev"}})}});for(var k=0;k<p.length;k++)$(".gallery__btn"+k).each(function(){var e=$(this).find(".swiper-slide");e.length>1&&$(".gallery__btn"+k).fadeIn(),e.length>5&&$(this).find(".b-arrow").css("display","block")});if($("#input-search").exists)try{$("#input-search").on("keyup",function(){$(this).val()?($(".mf-search").addClass("mf-search--active"),$(".header__field .b-svg").css({stroke:"#27202C"})):($(".mf-search").removeClass("mf-search--active"),$(".header__field .b-svg").css({stroke:"#DBD4E0"}))}),$("#input-search").focusout(function(){$(this).val()||($(".mf-search").removeClass("mf-search--active"),$(".header__field .b-svg").css({stroke:"#DBD4E0"}))})}catch(e){console.log(e)}if($(".news-slider__gallery").exists&&$(".news-slider__thumbs").exists)try{var P=new Swiper(".news-slider__gallery",{spaceBetween:10,slidesPerView:1,watchSlidesVisibility:!0,effect:"fade"}),C=new Swiper(".news-slider__thumbs",{spaceBetween:10,effect:"fade",navigation:{nextEl:".news-slider__arrow--next",prevEl:".news-slider__arrow--prev"},fadeEffect:{crossFade:!0},breakpoints:{920:{touchRatio:1},921:{touchRatio:0}}});C.controller.control=P,P.controller.control=C}catch(e){console.log(e)}if($(".edition-slider").exists())try{new Swiper(".edition-slider",{spaceBetween:18,slidesPerView:6,slidesPerColumn:2,slidesPerColumnFill:"row",slidesPerGroup:6,navigation:{nextEl:".edition-slider__arr--next",prevEl:".edition-slider__arr--prev"},pagination:{el:".edition-slider__pag",clickable:!0,renderBullet:function(e,t){return'<span class="'+t+'">'+(e+1)+"</span>"}},breakpoints:{1920:{spaceBetween:18,slidesPerView:6},769:{spaceBetween:18,slidesPerView:6},768:{spaceBetween:15,slidesPerView:5,slidesPerGroup:5},621:{spaceBetween:15,slidesPerView:5,slidesPerGroup:5},620:{spaceBetween:10,slidesPerView:4,slidesPerGroup:4},501:{spaceBetween:10,slidesPerView:3,slidesPerGroup:3},321:{spaceBetween:10,slidesPerGroup:3,slidesPerView:2},320:{spaceBetween:10,slidesPerView:2,slidesPerGroup:2}}})}catch(e){console.log(e)}});